# HELLDECK Game Validation Rules

## Overview

The `ComedyScienceValidator` enforces quality gates for all 14 HELLDECK games. Cards failing validation are rejected and regenerated by the LLM.

## Validation Layers

1. **Banned Cliché Check** - Instant rejection for lazy comedy
2. **Specificity Scoring** - Rewards concrete details
3. **Visual Imagery Scoring** - Rewards vivid content
4. **Game-Mechanic Validation** - Per-game format requirements

---

## Per-Game Validation Rules

### ROAST_CONSENSUS
**Mechanic:** Players vote on who in the group fits the description

| Rule | Enforcement |
|------|-------------|
| Must use "who would" or "most likely" format | ✅ Required |
| No appearance-based content (body shaming) | ✅ Required |
| Should be about behavior | ✅ Required |

**Blocked words:** ugliest, fattest, skinniest, shortest, tallest, looks like, body, face, ugly, fat, skinny, bald, weight, attractive

---

### POISON_PITCH
**Mechanic:** Choose between two equally terrible/appealing options

| Rule | Enforcement |
|------|-------------|
| Both optionA and optionB must exist | ✅ Required |
| Each option minimum 15 characters | ✅ Required |
| Length ratio max 3:1 | ✅ Required |

---

### RED_FLAG_RALLY
**Mechanic:** Debate whether a positive trait outweighs a red flag

| Rule | Enforcement |
|------|-------------|
| Must have "but" separator | ✅ Required |
| Must start with "They're" or "They" | ✅ Required |
| No abusive content | ✅ Required |

**Blocked words:** hit you, hits you, beat you, beats you, abuse, violent, threatens, stalks, stalking

---

### HOT_SEAT_IMPOSTER
**Mechanic:** Imposter must fail if they don't know the target

| Rule | Enforcement |
|------|-------------|
| Must be a question (contains ?) | ✅ Required |
| Generic questions need temporal context | ✅ Required |

**Generic starters requiring context:** "what's your favorite", "do you like", "are you a"
**Acceptable context:** "right now", "this week", "recently", "last"

---

### SCATTERBLAST
**Mechanic:** Creativity competition, not trivia knowledge

| Rule | Enforcement |
|------|-------------|
| Must have category | ✅ Required |
| Category must be creative (not trivia) | ✅ Required |

**Creative markers:** would, should, worst, terrible, excuse, reason, banned, fired, never, always, ruin, destroy, survive, get you, say, yell, inappropriate, awkward

**Rule:** Category must contain creative marker OR be 4+ words

---

### TABOO_TIMER
**Mechanic:** Describe a word without using obvious related words

| Rule | Enforcement |
|------|-------------|
| Must have 3+ forbidden words | ✅ Required |

---

### ALIBI_DROP
**Mechanic:** Sneak specific words into a story without getting caught

| Rule | Enforcement |
|------|-------------|
| Must have 3+ words to sneak | ✅ Required |
| Words must be diverse | ✅ Required |

**Diversity check:** Rejects if all words are <4 chars or all end in "-ing"

---

### TEXT_THREAD_TRAP
**Mechanic:** Read text in assigned tone, others guess the tone

| Rule | Enforcement |
|------|-------------|
| Must have 3+ tone options | ✅ Required |
| Should create tension/awkwardness | ✅ Required (if <30 chars) |

**Tension words:** need to talk, saw you, know what you did, i miss, why did you, who is, explain, found out, told me, last night, wrong number, meant to send

---

### OVER_UNDER
**Mechanic:** Guess a number, reveal actual, comedy in the gap

| Rule | Enforcement |
|------|-------------|
| Must ask for countable number | ✅ Required |

**Number words:** number of, how many, how much, times, minutes, hours, days, percent, average

---

### REALITY_CHECK
**Mechanic:** Self-rate on a trait, comedy from gap vs group rating

| Rule | Enforcement |
|------|-------------|
| Must ask for a self-rating | ✅ Required |

**Rate words:** rate, scale of, how good, how well, how often, how much, how likely, 1 to 10, 1-10

---

### FILL_IN_FINISHER
**Mechanic:** Complete the blank, judge picks funniest

| Rule | Enforcement |
|------|-------------|
| Must have blank (_____ or ___) | ✅ Required |

---

### CONFESSION_OR_CAP
**Mechanic:** Group guesses if confession is truth or lie

| Rule | Enforcement |
|------|-------------|
| Must be first-person format | ✅ Required |

**Valid starters:** i once, i've, i have, i was, i got, i accidentally, i used to, i secretly

---

### TITLE_FIGHT
**Mechanic:** Debate who would win in absurd matchup

| Rule | Enforcement |
|------|-------------|
| Must have "vs" or "versus" format | ✅ Required |

---

### THE_UNIFYING_THEORY
**Mechanic:** Find what random things have in common

| Rule | Enforcement |
|------|-------------|
| Must have multiple items (comma or "and") | ✅ Required |

---

## Global Banned Clichés

These phrases cause instant rejection for ANY game:

- "rich or famous"
- "million dollars"
- "deserted island"
- "zombie apocalypse"
- "if you could have any superpower"
- "your celebrity crush"

---

## Specificity Scoring

Cards earn points for concrete details:

| Marker Type | Examples | Points |
|-------------|----------|--------|
| Numbers | "3am", "45 minutes" | +1 |
| Brands | Costco, Starbucks, Uber, Tesla | +1 |
| Places | parking lot, bathroom, airport, gym | +1 |
| Times | 2am, midnight, morning | +1 |
| Relationships | mom, boss, ex, therapist | +1 |

---

## Visual Imagery Scoring

Cards earn points for vivid actions:

| Markers | Points |
|---------|--------|
| crying, screaming, drunk, naked, eating, texting | +1 each (max 2) |
| banned, fired, arrested, kicked out | +1 each (max 2) |

---

## Implementation

```kotlin
// Usage in LLMCardGeneratorV2.kt
val validation = ComedyScienceValidator.validate(
    text = text,
    gameId = gameId,
    optionA = optionA,
    optionB = optionB,
    category = category,
    forbidden = forbidden,
    words = words,
    tones = tones
)

if (!validation.isValid) {
    // Reject and regenerate
    return false
}
```

---

*Last updated: January 31, 2026*
